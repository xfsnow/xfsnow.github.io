<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Snowpeak Blog</title><meta name="description" content="Sharing and discussing cutting-edge technologies of AI and cloud computing, and other interesting topics."><meta name="keywords" content="AI, GitHub Copilot, Azure Cloud, Cloud Computing, Front-end Technology, Back-end Technology, Web Development, Software Engineering"><link rel="stylesheet" href="/assets/css/style.min.css"><link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.7.2/css/all.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script></head><body><nav class="navbar"><div class="nav-container"><div class="nav-logo"><h2><i class="fas fa-snowflake"></i> Snowpeak</h2></div><div class="nav-menu"><a href="/en/" class="nav-link">Home</a><a href="/en/page_1.htm" class="nav-link">Article</a><a href="/en#tools" class="nav-link">Tools</a><a href="/en/about.htm" class="nav-link">About</a><a href="/" class="nav-link lang-switch"><i class="fas fa-globe"></i> 简体中文</a></div><div class="nav-toggle" id="mobile-menu"><span class="bar"></span><span class="bar"></span><span class="bar"></span></div></div></nav><header class="article-header"><div class="container"><h1>JavaScript URL Parameter Parsing - Improved Version</h1><div class="article-meta"><span><i class="fas fa-calendar"></i> Published: 2008-10-24 17:41:00</span><span><i class="fas fa-clock"></i> Reading time: 8 minutes </span><span><i class="fas fa-tag"></i> Category: Frontend</span></div></div></header><main class="article-container"><p>The previous version of the JavaScript URL parser avoided using loops but relied heavily on regular expressions for replacements. While this approach might not necessarily improve performance compared to loops, it made the code overly complex. Here's an example learned from the book <em>JavaScript: The Definitive Guide</em>:</p> <pre><code class="language-javascript">/* A simpler method for extracting URL parameters introduced in *JavaScript: The Definitive Guide*. It avoids regular expressions and uses a single loop. The advantage of returning an object is that you only need to call this function once, and all parameters and their values are stored in an object. You can then access any parameter's value without calling the function again.
 * Usage:
 * var args = getArgs(); // Parse parameters from the URL
 * var q = args.q || &quot;&quot;; // Use the parameter value if defined, otherwise assign a default value
 * var n = args.n ? parseInt(args.n) : 10;
 */
var getArgs = function () {
    var args = new Object(); // Declare an empty object
    var query = window.location.search.substring(1); // Extract the query string, e.g., &quot;a1=v1&amp;a2=&amp;a3=v3&quot; from &quot;http://www.snowpeak.org/testjs.htm?a1=v1&amp;a2=&amp;a3=v3#anchor&quot;.
    var pairs = query.split(&quot;&amp;&quot;); // Split into an array by &quot;&amp;&quot;
    for (var i = 0; i &lt; pairs.length; i++) {
        var pos = pairs[i].indexOf('='); // Find the &quot;name=value&quot; pair
        if (pos == -1) continue; // Skip if not a valid pair
        var argname = pairs[i].substring(0, pos); // Extract parameter name
        var value = pairs[i].substring(pos + 1); // Extract parameter value
        value = decodeURIComponent(value); // Decode if necessary
        args[argname] = value; // Store as an object property
    }
    return args; // Return the object
}
</code></pre> <p>The standout advantage of this method is that the program only needs to execute once to extract all parameters. Subsequent accesses to parameter values do not require re-execution. Parsing URL parameters this way is simpler, more convenient, and easier to understand. Below is the "no loop" but "overly complex" version I previously published:</p> <pre><code class="language-javascript">// Extract parameter values from a URL using pure regular expressions without loops. The core technique is the replace() method of strings, which can use a function as the second argument to replace matches according to user-defined rules.
// If the parameter name exists but has no value, return an empty string; if the parameter name does not exist, return undefined.
var getArg = function (argname) {
    var str = location.href;
    var submatch;
    // Extract the query string between &quot;?&quot; and &quot;#&quot;, e.g., &quot;a1=v1&amp;a2=&amp;a3=v3&quot; from &quot;http://www.snowpeak.org/testjs.htm?a1=v1&amp;a2=&amp;a3=v3#anchor&quot;.
    if (submatch = str.match(/\?([^#]*)#?/)) {
        var argstr = '&amp;' + submatch[1]; // Add &quot;&amp;&quot; to the front for easier replacement
        var returnPattern = function (str) {
            return str.replace(/&amp;([^=]+)=([^&amp;]*)/, '$1:&quot;$2&quot;,'); // Replace &quot;&amp;name=value&quot; with &quot;name:&quot;value&quot;,&quot;.
        }
        argstr = argstr.replace(/&amp;([^=]+)=([^&amp;]*)/g, returnPattern); // Perform global replacement
        eval('var retvalue = {' + argstr.substr(0, argstr.length - 1) + '};'); // Declare an object, e.g., &quot;var retvalue = {a1:&quot;v1&quot;,a2:&quot;&quot;,a3:&quot;v3&quot;};&quot;
        return retvalue[argname]; // Return the value of the specified parameter
    }
}

// Test
document.write('a1=' + getArg('a1') + ', a2=' + getArg('a2') + ', a3=' + getArg('a3'));
</code></pre> <p>Original Link: <a href="https://snowpeak.blog.csdn.net/article/details/3137375">https://snowpeak.blog.csdn.net/article/details/3137375</a></p></main><footer class="footer"><div class="container"><div class="footer-content"><div class="footer-section"><h3><i class="fas fa-snowflake"></i> Snowpeak</h3><p>Sharing and discussing cutting-edge technologies of AI and cloud computing, and other interesting topics.</p><div class="social-links"><div class="social-platforms"><a href="https://github.com/xfsnow" target="_blank" class="social-link"><i class="fab fa-github"></i></a><a href="https://snowpeak.blog.csdn.net/" target="_blank" class="social-link"><i class="fas fa-blog"></i></a><a href="https://space.bilibili.com/701839928" target="_blank" class="social-link"><i class="fab fa-bilibili"></i></a><a href="https://www.linkedin.com/in/snowpeak" target="_blank" class="social-link"><i class="fab fa-linkedin"></i></a></div><div class="wechat-section"><div class="wechat-info"><span class="wechat-label">WeChat Account</span><span class="wechat-name">Tech Warm Life</span></div><img src="/assets/img/techwarm.jpg" alt="Tech Warm Life" class="wechat-qr"></div></div></div><div class="footer-section"><h4>Quick Links</h4><ul><li><a href="/#articles">Article</a></li><li><a href="/#tools">Tools</a></li><li><a href="https://docs.github.com/en/pages" target="_blank">GitHub Pages</a></li></ul></div><div class="footer-section"><h4>Tech Stack</h4><ul><li>Python</li><li>GitHub Copilot</li><li>Claude Sonnet 4</li><li>HTML/CSS/JS</li><li>Responsive Design</li></ul></div></div><div class="footer-bottom"><p>Copyright &copy; 2013-<script>document.write((new Date()).getFullYear());</script> Snowpeak Blog. Running on GitHub Pages. <a href="https://beian.miit.gov.cn" target="_blank" class="icp_beian">京ICP备2021007720号</a><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502052523" target="_blank" class="gongan_beian">京公网安备11010502052523号</a></p></div></div></footer><script src="/en/index.js"></script><script src="/assets/js/blog.min.js"></script><script>hljs.highlightAll();</script></body></html>