<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Snowpeak Blog</title><meta name="description" content="Sharing and discussing cutting-edge technologies of AI and cloud computing, and other interesting topics."><meta name="keywords" content="AI, GitHub Copilot, Azure Cloud, Cloud Computing, Front-end Technology, Back-end Technology, Web Development, Software Engineering"><link rel="stylesheet" href="/assets/css/style.min.css"><link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v7.1.0/css/all.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css"></head><body><nav class="navbar"><div class="nav-container"><div class="nav-logo"><h2><i class="fas fa-snowflake"></i> Snowpeak</h2></div><div class="nav-menu"><a href="/en/" class="nav-link">Home</a><a href="/en/page_1.htm" class="nav-link">Article</a><a href="/en#tools" class="nav-link">Tools</a><a href="/en/about.htm" class="nav-link">About</a><a href="/" class="nav-link lang-switch"><i class="fas fa-globe"></i> 简体中文</a></div><div class="nav-toggle" id="mobile-menu"><span class="bar"></span><span class="bar"></span><span class="bar"></span></div></div></nav><header class="article-header"><div class="container"><h1>Multi-account Configuration for Git Repositories and SSH Remote Login</h1><div class="article-meta"><span><i class="fas fa-calendar"></i> Published: 2021-04-15 17:14:21</span><span><i class="fas fa-clock"></i> Reading time: 8 minutes </span><span><i class="fas fa-tag"></i> Category: Tools</span></div></div></header><main class="article-container"><p>Multi-account configuration for Git repositories is essentially an extension of multi-account configuration for SSH remote login. Let's first look at the basic SSH remote login multi-account configuration.</p><p>Create a file named config under ~/.ssh/. Write the following configuration in it:</p> <pre><code class="language-config">Host testVM
    HostName xxx.xxx.xxx.xxx
    User username
    Port 22
    IdentityFile /path/to/my/private/key/testVM.pem
</code></pre> <p>Note that all private key file permissions should be set to 400, and config file permissions should be set to 600.</p> <pre><code class="language-bash">chmod 400 /path/to/my/private/key/testVM.pem
chmod 600 ~/.ssh/config
</code></pre> <p>Then you can use aliases to run simplified SSH remote login, for example: ssh testVM.</p><p>Building on this foundation, when we need to manage multiple Git repositories simultaneously, we still add Git server access configurations in the config file. For example:</p> <pre><code class="language-config"># Github
Host github.com
    User github_user_name
    IdentityFile /path/to/my/private/key/github.pem

# Azure Repos, private repositories hosted on Azure
Host ssh.dev.azure.com
    User git
    IdentityFile /path/to/my/private/key/repos.pem
</code></pre> <p>It's important to note that when configuring Git servers, don't write the HostName item. Instead, directly write the Git server domain name in the Host section. This allows ssh and git clients to properly find the relevant server configuration and load the required private key.</p><p>Afterwards, we can verify authorization with ssh -Tv git@github.com. The -T parameter indicates test verification, and -v indicates outputting debug information at level 1 detail.</p><p>The return result is quite long, so only the important parts are excerpted:</p> <pre><code class="language-bash">OpenSSH_7.5p1, OpenSSL 1.0.2o  27 Mar 2018
debug1: Reading configuration data /home/mobaxterm/.ssh/config
debug1: /home/mobaxterm/.ssh/config line 12: Applying options for github.com
...
debug1: Connecting to github.com [192.30.255.113] port 22.
debug1: Connection established.
...
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /path/to/my/private/key/github.pem
debug1: Authentication succeeded (publickey).
Authenticated to github.com ([192.30.255.113]:22).
debug1: Requesting X11 forwarding with authentication spoofing.
debug1: Requesting authentication agent forwarding.
X11 forwarding request failed on channel 0
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
Hi github_user_name! You've successfully authenticated, but GitHub does not provide shell access.
</code></pre> <p>When using Azure DevOps Repos as the repository, using ssh -Tv for verification is more important because the successful authentication information is in the debug output. Without -v, it may seem like the verification failed.</p> <pre><code class="language-bash">ssh -T git@ssh.dev.azure.com

X11 forwarding request failed on channel 0
shell request failed on channel 0
</code></pre> <p>With the -v parameter, we can see:</p> <pre><code class="language-bash">ssh -Tv git@ssh.dev.azure.com

OpenSSH_7.5p1, OpenSSL 1.0.2o  27 Mar 2018
debug1: Reading configuration data /home/mobaxterm/.ssh/config
debug1: /home/mobaxterm/.ssh/config line 4: Applying options for ssh.dev.azure.com
...
debug1: Connecting to ssh.dev.azure.com [20.189.107.3] port 22.
debug1: Connection established.
...
debug1: Authenticating to ssh.dev.azure.com:22 as 'git'
debug1: Host 'ssh.dev.azure.com' is known and matches the RSA host key.
debug1: Found key in /home/mobaxterm/.ssh/known_hosts:3
debug1: Authentications that can continue: password,publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /path/to/my/private/key/repos.pem
debug1: Authentication succeeded (publickey).
Authenticated to ssh.dev.azure.com ([20.189.107.3]:22).
...
X11 forwarding request failed on channel 0
shell request failed on channel 0
</code></pre> <p>Now we can see the successful authentication information.</p><p>At this point, multi-account configuration for Git is complete. Now we can git clone and start coding happily.</p></main><footer class="footer"><div class="container"><div class="footer-content"><div class="footer-section"><h3><i class="fas fa-snowflake"></i> Snowpeak</h3><p>Sharing and discussing cutting-edge technologies of AI and cloud computing, and other interesting topics.</p><div class="social-links"><div class="social-platforms"><a href="https://github.com/xfsnow" target="_blank" class="social-link"><i class="fab fa-github"></i></a><a href="https://snowpeak.blog.csdn.net/" target="_blank" class="social-link"><i class="fas fa-blog"></i></a><a href="https://space.bilibili.com/701839928" target="_blank" class="social-link"><i class="fab fa-bilibili"></i></a><a href="https://www.linkedin.com/in/snowpeak" target="_blank" class="social-link"><i class="fab fa-linkedin"></i></a></div><div class="wechat-section"><div class="wechat-info"><span class="wechat-label">WeChat Account</span><span class="wechat-name">Tech Warm Life</span></div><img src="/assets/img/techwarm.jpg" alt="Tech Warm Life" class="wechat-qr"></div></div></div><div class="footer-section"><h4>Quick Links</h4><ul><li><a href="/#articles">Article</a></li><li><a href="/#tools">Tools</a></li><li><a href="https://docs.github.com/en/pages" target="_blank">GitHub Pages</a></li></ul></div><div class="footer-section"><h4>Tech Stack</h4><ul><li>Python</li><li>GitHub Copilot</li><li>Claude Sonnet 4</li><li>HTML/CSS/JS</li><li>Responsive Design</li></ul></div></div><div class="footer-bottom"><p>Copyright &copy; 2013-<script>document.write((new Date()).getFullYear());</script> Snowpeak Blog. Running on GitHub Pages. <a href="https://beian.miit.gov.cn" target="_blank" class="icp_beian">京ICP备2021007720号</a><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502052523" target="_blank" class="gongan_beian">京公网安备11010502052523号</a></p></div></div></footer><script src="/en/index.js"></script><script src="/assets/js/blog.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script><script>hljs.highlightAll(); if (window.location.hostname === 'www.snowpeak.org') { const script = document.createElement('script'); script.defer = true; script.src = 'https://static.cloudflareinsights.com/beacon.min.js'; script.dataset.cfBeacon = JSON.stringify({ "token": "4c2c021185e64942857a36d116eb4711" }); document.head.appendChild(script); } </script></body></html>