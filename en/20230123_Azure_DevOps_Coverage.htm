<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Snowpeak Blog</title><meta name="description" content="Sharing and discussing cutting-edge technologies of AI and cloud computing, and other interesting topics."><meta name="keywords" content="AI, GitHub Copilot, Azure Cloud, Cloud Computing, Front-end Technology, Back-end Technology, Web Development, Software Engineering"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.7.2/css/all.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/default.min.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script></head><body><nav class="navbar"><div class="nav-container"><div class="nav-logo"><h2><i class="fas fa-snowflake"></i> Snowpeak</h2></div><div class="nav-menu"><a href="/en/" class="nav-link">Home</a><a href="/en/page_1.htm" class="nav-link">Article</a><a href="/en#tools" class="nav-link">Tools</a><a href="/en/about.htm" class="nav-link">About</a><a href="/" class="nav-link lang-switch"><i class="fas fa-globe"></i> 简体中文</a></div><div class="nav-toggle" id="mobile-menu"><span class="bar"></span><span class="bar"></span><span class="bar"></span></div></div></nav><header class="article-header"><div class="container"><h1>Displaying Code Coverage in Azure Pipeline</h1><div class="article-meta"><span><i class="fas fa-calendar"></i> Published: 2023-01-23 10:00:00</span><span><i class="fas fa-clock"></i> Reading time: 6 minutes </span><span><i class="fas fa-tag"></i> Category: Tools</span></div></div></header><main class="article-container"><p>Azure Pipeline is a hosted service responsible for automated pipelines in Microsoft's comprehensive DevOps toolset on the cloud, featuring complete pipeline management capabilities and convenient integration with various testing, building, and deployment tools. Code coverage is an important metric in automated testing, measuring the proportion of source code executed during testing relative to the total source code, indirectly measuring software quality. If project code is configured to export code coverage, Azure Pipeline can collect and store the corresponding data. However, by default, this data is only available for download and viewing with other tools. This article briefly introduces how to visually display code coverage in the Azure Pipeline console.</p><h2>Preparing Project Source Code</h2><p>We use <code>dotnet new xunit</code> to initialize a standard .NET test case project. It displays as follows in VS Code:</p><p><img alt="" src="../assets/img/20230123_Azure_DevOps_Coverage_01.png"></p><p>To implement code coverage, the core configuration is in the NetCodeCoverage.csproj file in the following section:</p> <pre><code class="language-xml">&lt;PackageReference Include=&quot;coverlet.collector&quot; Version=&quot;3.1.2&quot;&gt;
      &lt;IncludeAssets&gt;runtime; build; native; contentfiles; analyzers; buildtransitive&lt;/IncludeAssets&gt;
      &lt;PrivateAssets&gt;all&lt;/PrivateAssets&gt;
&lt;/PackageReference&gt;
</code></pre> <p>If it's not there, you can manually add it.</p><p>Then execute <code>dotnet build</code> and <code>dotnet test</code> commands, and you can see the following output:</p><p><img alt="" src="../assets/img/20230123_Azure_DevOps_Coverage_02.png"></p><p>The default created test case doesn't contain any code logic, so of course the test passes. If there are issues, you can fork the source code directly from my GitHub:</p><p><a href="https://github.com/xfsnow/NetCodeCoverage">https://github.com/xfsnow/NetCodeCoverage</a></p><h2>Creating Azure Pipeline</h2><p>In the Azure DevOps console, find Pipeline under Pipelines, and click "New pipeline" in the upper right corner to create a new YAML format pipeline.</p><p>For "Where is your code", select GitHub first. Connect to the GitHub source repository just submitted.</p><p>On the Configure page, select "Starter template". Finally, we reach the Review page where we see the following initial pipeline:</p><p><img alt="" src="../assets/img/20230123_Azure_DevOps_Coverage_03.png"></p><p>Delete the existing 2 script tasks. Click "Show assistant" in the upper right corner, click ".NET Core" in Tasks, as shown below, first add a build task:</p><p><img alt="" src="../assets/img/20230123_Azure_DevOps_Coverage_04.png"></p><p>Then select "test" from the Command menu:</p><p><img alt="" src="../assets/img/20230123_Azure_DevOps_Coverage_05.png"></p><p>Note to keep "Publish test results and code coverage" selected, then add a test task.</p><p>Finally, add a publish code coverage task.</p><p>Finally, click the "Save and run" button in the upper right corner, commit to the source repository as prompted and execute.</p><ul><li>[ ] To be continued</li></ul></main><footer class="footer"><div class="container"><div class="footer-content"><div class="footer-section"><h3><i class="fas fa-snowflake"></i> Snowpeak</h3><p>Sharing and discussing cutting-edge technologies of AI and cloud computing, and other interesting topics.</p><div class="social-links"><div class="social-platforms"><a href="https://github.com/xfsnow" target="_blank" class="social-link"><i class="fab fa-github"></i></a><a href="https://snowpeak.blog.csdn.net/" target="_blank" class="social-link"><i class="fas fa-blog"></i></a><a href="https://space.bilibili.com/701839928" target="_blank" class="social-link"><i class="fab fa-bilibili"></i></a><a href="https://www.linkedin.com/in/snowpeak" target="_blank" class="social-link"><i class="fab fa-linkedin"></i></a></div><div class="wechat-section"><div class="wechat-info"><span class="wechat-label">WeChat Account</span><span class="wechat-name">Tech Warm Life</span></div><img src="/assets/img/techwarm.jpg" alt="Tech Warm Life" class="wechat-qr"></div></div></div><div class="footer-section"><h4>Quick Links</h4><ul><li><a href="/#articles">Article</a></li><li><a href="/#tools">Tools</a></li><li><a href="https://docs.github.com/en/pages" target="_blank">GitHub Pages</a></li></ul></div><div class="footer-section"><h4>Tech Stack</h4><ul><li>Python</li><li>GitHub Copilot</li><li>Claude Sonnet 4</li><li>HTML/CSS/JS</li><li>Responsive Design</li></ul></div></div><div class="footer-bottom"><p>Copyright &copy; 2013-<script>document.write((new Date()).getFullYear());</script> Snowpeak Blog. Running on GitHub Pages.</p></div></div></footer><script src="/en/index.js"></script><script src="/assets/js/blog.js"></script><script>hljs.highlightAll();</script></body></html>